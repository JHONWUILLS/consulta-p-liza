<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta de Póliza RCV</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; padding: 20px; background-color: #e9ecef; }
        .card { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); max-width: 450px; margin: auto; border-top: 8px solid #d32f2f; }
        h2 { color: #333; margin-bottom: 10px; }
        hr { border: 0; border-top: 1px solid #eee; margin: 20px 0; }
        .info-row { text-align: left; margin-bottom: 15px; font-size: 1.1em; }
        .info-label { font-weight: bold; color: #666; display: block; font-size: 0.9em; }
        .info-value { color: #222; font-weight: 600; }
        .status { color: #28a745; font-weight: bold; font-size: 1.2em; margin-top: 20px; display: block; }
        .btn { display: block; padding: 15px 20px; background: #d32f2f; color: white; text-decoration: none; border-radius: 10px; margin-top: 25px; font-weight: bold; }
    </style>
</head>
<body>

<div class="card">
    <img src="https://cdn-icons-png.flaticon.com/512/1162/1162280.png" style="width: 70px;" alt="Logo">
    <h2>Certificado Digital RCV</h2>
    <p style="color: #888;">Verificación en Línea</p>
    <hr>
    
    <div class="info-row">
        <span class="info-label">TITULAR:</span>
        <span id="nombre" class="info-value">Cargando...</span>
    </div>
    <div class="info-row">
        <span class="info-label">PLACA / VEHÍCULO:</span>
        <span id="placa" class="info-value">Cargando...</span>
    </div>
    <div class="info-row">
        <span class="info-label">VENCIMIENTO:</span>
        <span id="vencimiento" class="info-value">Cargando...</span>
    </div>

    <span class="status">● PÓLIZA VIGENTE</span>
    
    <a id="link-pdf" href="#" class="btn" target="_blank">DESCARGAR CERTIFICADO PDF</a>
</div>

<script>
    // === REEMPLAZA ESTO CON TUS DATOS ===
    const SB_URL = 'TU_URL_DE_SUPABASE_AQUI'; 
    const SB_KEY = 'TU_LLAVE_ANON_AQUI';
    // =====================================

    const _supabase = supabase.createClient(SB_URL, SB_KEY);

    async function cargarDatos() {
        const { data, error } = await _supabase
            .from('polizas') 
            .select('*')
            .order('id', { ascending: false })
            .limit(1)
            .single();

        if (data) {
            document.getElementById('nombre').innerText = data.nombre_cliente;
            document.getElementById('placa').innerText = data.placa;
            document.getElementById('vencimiento').innerText = data.vencimiento;
            document.getElementById('link-pdf').href = data.url_pdf;
        } else {
            document.getElementById('nombre').innerText = "Sin datos";
        }
    }
    cargarDatos();
</script>

</body>
</html>
